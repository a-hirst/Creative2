<!doctype html>
<html ng-app="myApp">
  <head>
    <title>Trip Planner</title>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <script>
      $(document).ready(function() {
        $("#directionsButton").click(function(e) {
          var start = $("#startField").val();
          var end = $("#endField").val();
          e.preventDefault();
          var startStr = encodeURIComponent(start)
          var endStr = encodeURIComponent(end);
          $("#directionMap").attr("src", "https://www.google.com/maps/embed/v1/directions?origin="+startStr+"&destination="+endStr+"&key=AIzaSyDfkp9AI3-fOnspxkHA3XFCUgoLk_5Nnfs");
        
          // get directions
          var directionsURL = "https://maps.googleapis.com/maps/api/directions/json?origin="
          directionsURL += startStr;
          directionsURL += "&destination=";
          directionsURL += endStr;
          directionsURL += "&key=AIzaSyCQeWcc9-LdzhLaZk6zDI_t11-_VX63AKQ";
          console.log("directionsURL", directionsURL);
          
          directionsURL = "https://maps.googleapis.com/maps/api/geocode/json?address=rigby&key=AIzaSyCQeWcc9-LdzhLaZk6zDI_t11-_VX63AKQ";
          
          $.ajax({
            url: directionsURL,
            type: "GET",
            dataType: "json",
            success: function(data) {
              console.log(data);
              var coordinates = JSON.stringify(data["results"][0]["geometry"]["location"]);
              var lat = JSON.stringify(data["results"][0]["geometry"]["location"]["lat"]);
              var lng = JSON.stringify(data["results"][0]["geometry"]["location"]["lng"]);
              console.log('coordinate', coordinates);
              $("#directions").html = "<div>" + coordinates + "</div>";
              // $("#directions").html = "<div>" + JSON.stringify(data) + "</div>";
              // console.log("directions data", JSON.stringify(data));
            },
            failure: function(stuff) {
             console.log('failure', stuff); 
            }
          });
         // $.getJSON(directionsUrl,
        });
      });
    </script>
  </head>
  <body>
    <h1>Creative Project 2</h1>
    <form>
      Starting Location: <input type="text" id="startField" value=""><br>
      Destination: <input type="text" id="endField" value=""><br>
      <input id="directionsButton" type="submit" value="Submit">
    </form>
    <div>
      <div style="float: left; width: 500px" id="directions">
      </div>
      <iframe width="600" height="450" frameborder="0" style="border:0; float: right" id="directionMap"
              src="" 
              allowfullscreen></iframe>
    </div>
  </body>
</html>
