<!doctype html>
<html ng-app="myApp">
  <head>
    <title>Trip Planner</title>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <script>
      $(document).ready(function() {
        $("#directionsButton").click(function(e) {
          var start = $("#startField").val();
          var end = $("#endField").val();
          e.preventDefault();
          var startStr = encodeURIComponent(start)
          var endStr = encodeURIComponent(end);
          $("#directionMap").attr("src", "https://www.google.com/maps/embed/v1/directions?origin="+startStr+"&destination="+endStr+"&key=AIzaSyDfkp9AI3-fOnspxkHA3XFCUgoLk_5Nnfs");
          
          var startPosURL = "https://maps.googleapis.com/maps/api/geocode/json?address="+startStr+"&key=AIzaSyCQeWcc9-LdzhLaZk6zDI_t11-_VX63AKQ";
          var endPosURL = "https://maps.googleapis.com/maps/api/geocode/json?address="+endStr+"&key=AIzaSyCQeWcc9-LdzhLaZk6zDI_t11-_VX63AKQ";
          
          $.ajax({
            url: startPosURL,
            type: "GET",
            dataType: "json",
            success: function(data) {
              var coordinates = data["results"][0]["geometry"]["location"];
              var lat = data["results"][0]["geometry"]["location"]["lat"];
              var lng = data["results"][0]["geometry"]["location"]["lng"];
              console.log('coordinates 1', lat, lng);
              $("#directions").val = "<div>" + lat + "</div>";
              
              //get altitiude
              var altURL = "https://maps.googleapis.com/maps/api/elevation/json?locations=";
              altURL += lat;
              altURL += ",";
              altURL += lng;
              altURL += "&key=AIzaSyCQeWcc9-LdzhLaZk6zDI_t11-_VX63AKQ";
              $.ajax({
                url: altURL,
                type: "GET",
                dataType: "jsonp",
                success: function(altData) {
                 var elevation = altData["results"][0]["elevation"];
                  alert(elevation);
                }
              });
              
              // $("#directions").html = "<div>" + JSON.stringify(data) + "</div>";
              // console.log("directions data", JSON.stringify(data));
            }
          });
          
          $.ajax({
            url: endPosURL,
            type: "GET",
            dataType: "json",
            success: function(data) {
              var lat = data["results"][0]["geometry"]["location"]["lat"];
              var lng = data["results"][0]["geometry"]["location"]["lng"];
              console.log('coordinates 2', lat, lng);
              $("#directions").val = "<div>" + lng + "</div>";
              // $("#directions").html = "<div>" + JSON.stringify(data) + "</div>";
              // console.log("directions data", JSON.stringify(data));
            }
          });
         // $.getJSON(directionsUrl,
        });
      });
    </script>
  </head>
  <body>
    <h1>Creative Project 2</h1>
    <form>
      Starting Location: <input type="text" id="startField" value=""><br>
      Destination: <input type="text" id="endField" value=""><br>
      <input id="directionsButton" type="submit" value="Submit">
    </form>
    <div>
      <div style="float: left; width: 500px" id="directions">
      </div>
      <iframe width="600" height="450" frameborder="0" style="border:0; float: right" id="directionMap"
              src="" 
              allowfullscreen></iframe>
    </div>
  </body>
</html>
